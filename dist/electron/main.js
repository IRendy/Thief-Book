module.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=18)}([function(t){t.exports=require("electron")},function(t){t.exports=require("fs")},function(t){t.exports=require("path")},function(t){t.exports=require("fs-extra")},function(t){t.exports=require("lowdb")},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(8),o=n(16),s=r.readFileSync,c=r.writeFileSync,u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o),i(e,[{key:"read",value:function(){if(!r.existsSync(this.source))return c(this.source,this.serialize(this.defaultValue)),this.defaultValue;try{var t=s(this.source,"utf-8").trim();return t?this.deserialize(t):this.defaultValue}catch(t){throw t instanceof SyntaxError&&(t.message=`Malformed JSON in file: ${this.source}\n${t.message}`),t}}},{key:"write",value:function(t){return c(this.source,this.serialize(t))}}]),e}();t.exports=u},function(t){t.exports=require("lodash-id")},function(t){t.exports=require("os")},function(t,e,n){function i(t){function e(e){return h.apply(t,e)}function n(){return this instanceof n?(g.apply(this,arguments),this):n.apply(Object.create(n.prototype),arguments)}function s(){return this instanceof s?(m.apply(this,arguments),this):s.apply(Object.create(s.prototype),arguments)}function a(t,e,n,i){return"function"==typeof n&&(i=n,n=null),function t(e,n,i,s){return y(e,n,i,function(c){!c||"EMFILE"!==c.code&&"ENFILE"!==c.code?("function"==typeof s&&s.apply(this,arguments),o()):r([t,[e,n,i,s]])})}(t,e,n,i)}c(t),t.gracefulify=i,t.FileReadStream=n,t.FileWriteStream=s,t.createReadStream=function(t,e){return new n(t,e)},t.createWriteStream=function(t,e){return new s(t,e)};var l=t.readFile;t.readFile=function(t,e,n){return"function"==typeof e&&(n=e,e=null),function t(e,n,i){return l(e,n,function(s){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?("function"==typeof i&&i.apply(this,arguments),o()):r([t,[e,n,i]])})}(t,e,n)};var f=t.writeFile;t.writeFile=function(t,e,n,i){return"function"==typeof n&&(i=n,n=null),function t(e,n,i,s){return f(e,n,i,function(c){!c||"EMFILE"!==c.code&&"ENFILE"!==c.code?("function"==typeof s&&s.apply(this,arguments),o()):r([t,[e,n,i,s]])})}(t,e,n,i)};var p=t.appendFile;p&&(t.appendFile=function(t,e,n,i){return"function"==typeof n&&(i=n,n=null),function t(e,n,i,s){return p(e,n,i,function(c){!c||"EMFILE"!==c.code&&"ENFILE"!==c.code?("function"==typeof s&&s.apply(this,arguments),o()):r([t,[e,n,i,s]])})}(t,e,n,i)});var h=t.readdir;if(t.readdir=function(t,n,i){var s=[t];return"function"==typeof n?i=n:s.push(n),s.push(function(t,n){n&&n.sort&&n.sort(),!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof i&&i.apply(this,arguments),o()):r([e,[s]])}),e(s)},"v0.8"===process.version.substr(0,4)){var d=u(t);n=d.ReadStream,s=d.WriteStream}var g=t.ReadStream;g&&(n.prototype=Object.create(g.prototype),n.prototype.open=function(){var t=this;a(t.path,t.flags,t.mode,function(e,n){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n),t.read())})});var m=t.WriteStream;m&&(s.prototype=Object.create(m.prototype),s.prototype.open=function(){var t=this;a(t.path,t.flags,t.mode,function(e,n){e?(t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n))})}),t.ReadStream=n,t.WriteStream=s;var y=t.open;return t.open=a,t}function r(t){p("ENQUEUE",t[0].name,t[1]),l.push(t)}function o(){var t=l.shift();t&&(p("RETRY",t[0].name,t[1]),t[0].apply(null,t[1]))}var s=n(1),c=n(9),u=n(11),a=n(13),l=[],f=n(14),p=function(){};f.debuglog?p=f.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(p=function(){var t=f.format.apply(f,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){p(l),n(15).equal(l.length,0)}),t.exports=i(a(s)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!s.__patched&&(t.exports=i(s),s.__patched=!0),t.exports.close=function(t){return function(e,n){return t.call(s,e,function(t){t||o(),"function"==typeof n&&n.apply(this,arguments)})}}(s.close),t.exports.closeSync=function(t){return function(){var e=t.apply(s,arguments);return o(),e}}(s.closeSync),/\bgraceful-fs\b/.test(s.closeSync.toString())||(s.closeSync=t.exports.closeSync,s.close=t.exports.close)},function(t,e,n){var i=n(10),r=process.cwd,o=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return o||(o=r.call(process)),o};try{process.cwd()}catch(t){}var c=process.chdir;process.chdir=function(t){o=null,c.call(process,t)},t.exports=function(t){function e(e){return e?function(n,i,r){return e.call(t,n,i,function(t){a(t)&&(t=null),r&&r.apply(this,arguments)})}:e}function n(e){return e?function(n,i){try{return e.call(t,n,i)}catch(t){if(!a(t))throw t}}:e}function r(e){return e?function(n,i,r,o){return e.call(t,n,i,r,function(t){a(t)&&(t=null),o&&o.apply(this,arguments)})}:e}function o(e){return e?function(n,i,r){try{return e.call(t,n,i,r)}catch(t){if(!a(t))throw t}}:e}function c(e){return e?function(n,i){return e.call(t,n,function(t,e){return e?(0>e.uid&&(e.uid+=4294967296),0>e.gid&&(e.gid+=4294967296),void(i&&i.apply(this,arguments))):i.apply(this,arguments)})}:e}function u(e){return e?function(n){var i=e.call(t,n);return 0>i.uid&&(i.uid+=4294967296),0>i.gid&&(i.gid+=4294967296),i}:e}function a(t){return!t||("ENOSYS"===t.code||(!process.getuid||0!==process.getuid())&&("EINVAL"===t.code||"EPERM"===t.code))}i.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(e,n,r){t.open(e,i.O_WRONLY|i.O_SYMLINK,n,function(e,i){return e?void(r&&r(e)):void t.fchmod(i,n,function(e){t.close(i,function(t){r&&r(e||t)})})})},t.lchmodSync=function(e,n){var r,o=t.openSync(e,i.O_WRONLY|i.O_SYMLINK,n),s=!0;try{r=t.fchmodSync(o,n),s=!1}finally{if(s)try{t.closeSync(o)}catch(t){}else t.closeSync(o)}return r}}(t),t.lutimes||function(t){i.hasOwnProperty("O_SYMLINK")?(t.lutimes=function(e,n,r,o){t.open(e,i.O_SYMLINK,function(e,i){return e?void(o&&o(e)):void t.futimes(i,n,r,function(e){t.close(i,function(t){o&&o(e||t)})})})},t.lutimesSync=function(e,n,r){var o,s=t.openSync(e,i.O_SYMLINK),c=!0;try{o=t.futimesSync(s,n,r),c=!1}finally{if(c)try{t.closeSync(s)}catch(t){}else t.closeSync(s)}return o}):(t.lutimes=function(t,e,n,i){i&&process.nextTick(i)},t.lutimesSync=function(){})}(t),t.chown=r(t.chown),t.fchown=r(t.fchown),t.lchown=r(t.lchown),t.chmod=e(t.chmod),t.fchmod=e(t.fchmod),t.lchmod=e(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=n(t.chmodSync),t.fchmodSync=n(t.fchmodSync),t.lchmodSync=n(t.lchmodSync),t.stat=c(t.stat),t.fstat=c(t.fstat),t.lstat=c(t.lstat),t.statSync=u(t.statSync),t.fstatSync=u(t.fstatSync),t.lstatSync=u(t.lstatSync),t.lchmod||(t.lchmod=function(t,e,n){n&&process.nextTick(n)},t.lchmodSync=function(){}),t.lchown||(t.lchown=function(t,e,n,i){i&&process.nextTick(i)},t.lchownSync=function(){}),"win32"===s&&(t.rename=function(e){return function(n,i,r){var o=Date.now(),s=0;e(n,i,function c(u){return u&&("EACCES"===u.code||"EPERM"===u.code)&&6e4>Date.now()-o?(setTimeout(function(){t.stat(i,function(t){t&&"ENOENT"===t.code?e(n,i,c):r(u)})},s),void(100>s&&(s+=10))):void(r&&r(u))})}}(t.rename)),t.read=function(e){return function(n,i,r,o,s,c){var u;if(c&&"function"==typeof c){var a=0;u=function(l){return l&&"EAGAIN"===l.code&&10>a?(a++,e.call(t,n,i,r,o,s,u)):void c.apply(this,arguments)}}return e.call(t,n,i,r,o,s,u)}}(t.read),t.readSync=function(e){return function(n,i,r,o,s){for(var c=0;;)try{return e.call(t,n,i,r,o,s)}catch(t){if("EAGAIN"===t.code&&10>c){c++;continue}throw t}}}(t.readSync)}},function(t){t.exports=require("constants")},function(t,e,n){var i=n(12).Stream;t.exports=function(t){return{ReadStream:function e(n,r){if(!(this instanceof e))return new e(n,r);i.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,r=r||{};for(var s,c=Object.keys(r),u=0,a=c.length;u<a;u++)this[s=c[u]]=r[s];if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}return null===this.fd?void t.open(this.path,this.flags,this.mode,function(t,e){return t?(o.emit("error",t),void(o.readable=!1)):(o.fd=e,o.emit("open",e),void o._read())}):void process.nextTick(function(){o._read()})},WriteStream:function e(n,r){if(!(this instanceof e))return new e(n,r);i.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var o,s=Object.keys(r),c=0,u=s.length;c<u;c++)this[o=s[c]]=r[o];if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(0>this.start)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(t){t.exports=require("stream")},function(t){"use strict";t.exports=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var e={__proto__:t.__proto__};else e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}},function(t){t.exports=require("util")},function(t){t.exports=require("assert")},function(t,e,n){"use strict";var i=n(17);t.exports=function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.defaultValue,o=void 0===r?{}:r,s=n.serialize,c=void 0===s?i:s,u=n.deserialize,a=void 0===u?JSON.parse:u;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.source=e,this.defaultValue=o,this.serialize=c,this.deserialize=a}},function(t){"use strict";t.exports=function(t){return JSON.stringify(t,null,2)}},function(t,e,n){"use strict";function i(){var t=(j=new l.BrowserWindow({useContentSize:!0,width:856,height:47,resizable:!0,frame:!1,transparent:!0})).webContents;t.on("did-finish-load",function(){t.setZoomFactor(1),t.setVisualZoomLevelLimits(1,1),t.setLayoutZoomLevelLimits(0,0)}),j.loadURL(N),j.setAlwaysOnTop(!0),j.setSkipTaskbar(!0),j.on("closed",function(){j=null})}function r(t){global.text={text:t}}function o(){var t=x.getNextPage();"1"===S.get("curr_model")?F.setTitle(t):"2"===S.get("curr_model")&&(r(t),null!=j&&j.webContents.send("text","ping"))}function s(){var t=x.getPreviousPage();"1"===S.get("curr_model")?F.setTitle(t):"2"===S.get("curr_model")&&(r(t),null!=j&&j.webContents.send("text","ping"))}function c(t){var e=T.getTime();"1"===S.get("curr_model")&&F.setTitle(e),"2"===S.get("curr_model")&&(F.setTitle(""),r(e),null!=j&&(1===t?j.webContents.send("text","boss"):2===t&&(j.isVisible()?j.hide():j.show())))}function u(){l.globalShortcut.register("CommandOrControl+Alt+,",function(){s()}),l.globalShortcut.register("CommandOrControl+Alt+.",function(){o()}),l.globalShortcut.register("CommandOrControl+Alt+M",function(){c(2)}),l.globalShortcut.register("CommandOrControl+Alt+X",function(){l.app.quit()})}function a(){var t=(process.platform,__static+"/logo.png"),e=[];e.push({label:"关于",click:function(){l.shell.openExternal("https://github.com/cteams/Thief-Book")}}),z&&e.push({type:"separator"},{label:"任务栏版",type:"radio",checked:"1"===S.get("curr_model"),click:function(){S.set("curr_model","1"),null!=j&&j.close(),c(1)}},{label:"桌面版",type:"radio",checked:"2"===S.get("curr_model"),click:function(){i(),S.set("curr_model","2"),setTimeout(function(){c(1)},1e3)}}),e.push({type:"separator"},{label:"上一页",accelerator:"CommandOrControl+Alt+,",click:function(){s()}},{label:"下一页",accelerator:"CommandOrControl+Alt+.",click:function(){o()}},{label:"老板键",accelerator:"CommandOrControl+Alt+M",click:function(){c(2)}},{label:"设置",click:function(){!function(){var t=(L=new l.BrowserWindow({title:"设 置",useContentSize:!0,width:411,height:325,resizable:!1,maximizable:!1,minimizable:!1})).webContents;t.on("did-finish-load",function(){t.setZoomFactor(1),t.setVisualZoomLevelLimits(1,1),t.setLayoutZoomLevelLimits(0,0)}),L.loadURL(C),L.on("closed",function(){L=null})}()}},{type:"separator"},{role:"quit",accelerator:"CommandOrControl+Alt+X",label:"退出"}),(F=new l.Tray(t)).setContextMenu(l.Menu.buildFromTemplate(e)),c()}n.r(e);var l=n(0),f=n(4),p=n.n(f),h=n(5),d=n.n(h),g=n(2),m=n.n(g),y=n(3),_=n.n(y),b=n(6),v=n.n(b),S={data:function(){return{db_util:null,file_json:""}},init:function(){var t=("renderer"===process.type?l.remote.app:l.app).getPath("userData");"renderer"===process.type||_.a.pathExistsSync(t)||_.a.mkdirpSync(t),this.file_json=new d.a(m.a.join(t,"/thief_data.json")),this.db_util=p()(this.file_json),this.db_util._.mixin(v.a),this.db_util.has("current_page").value()||this.db_util.set("current_page",1).write(),this.db_util.has("page_size").value()||this.db_util.set("page_size",20).write(),this.db_util.has("is_english").value()||this.db_util.set("is_english",!1).write(),this.db_util.has("line_break").value()||this.db_util.set("line_break"," ").write(),this.db_util.has("current_file_path").value()||this.db_util.set("current_file_path","").write(),this.db_util.has("bg_color").value()||this.db_util.set("bg_color","rgba(0, 0, 0, 0.5)").write(),this.db_util.has("txt_color").value()||this.db_util.set("txt_color","#fff").write();var e="darwin"===process.platform;this.db_util.has("curr_model").value()||(e?this.db_util.set("curr_model","1").write():this.db_util.set("curr_model","2").write())},get:function(t){return this.init(),this.db_util.get(t).value()},set:function(t,e){this.init(),this.db_util.set(t,e).write()}},w=n(1),E=n.n(w),x={data:function(){return{curr_page_number:1,page_size:50,page:0,start:0,end:this.page_size,filePath:""}},getSize:function(t){var e=t.length;this.page=Math.ceil(e/this.page_size)},getFileName:function(){var t=this.filePath.split("/").pop();console.log(t)},getPage:function(t){var e=S.get("current_page"),n=0;"previous"===t?n=1>=e?1:e-1:"next"===t?n=e>=this.page?this.page:e+1:"curr"===t&&(n=e),this.curr_page_number=n},updatePage:function(){S.set("current_page",this.curr_page_number)},getStartEnd:function(){this.start=this.curr_page_number*this.page_size,this.end=this.curr_page_number*this.page_size-this.page_size},readFile:function(){if(""===this.filePath||void 0===this.filePath)return"请选择TXT小说路径";var t=E.a.readFileSync(this.filePath,"utf-8"),e=S.get("line_break");return t.toString().replace(/\n/g,e).replace(/\r/g," ").replace(/　　/g," ").replace(/ /g," ")},init:function(){this.filePath=S.get("current_file_path");var t=S.get("is_english"),e=S.get("curr_model");this.page_size=!0===t?"1"===e?2*S.get("page_size"):2*S.get("page_size")*5:"1"===e?S.get("page_size"):5*S.get("page_size")},getPreviousPage:function(){this.init();var t=this.readFile();this.getSize(t),this.getPage("previous"),this.getStartEnd();var e=this.curr_page_number.toString()+"/"+this.page.toString();return this.updatePage(),t.substring(this.start,this.end)+"    "+e},getNextPage:function(){this.init();var t=this.readFile();this.getSize(t),this.getPage("next"),this.getStartEnd();var e=this.curr_page_number.toString()+"/"+this.page.toString();return this.updatePage(),t.substring(this.start,this.end)+"    "+e},getJumpingPage:function(){this.init();var t=this.readFile();this.getSize(t),this.getPage("curr"),this.getStartEnd();var e=this.curr_page_number.toString()+"/"+this.page.toString();return this.updatePage(),t.substring(this.start,this.end)+"    "+e}},O=n(7),P=n.n(O),T={data:function(){return{db_util:null,file_json:""}},dealTime:function(t){var e=0|(t=0|t)/86400,n=0|(t-3600*e)/3600,i=0|(t-3600*e*24-3600*n)/60,r=t%60;return 10>e&&(e="0"+e),10>n&&(n="0"+n),10>i&&(i="0"+i),10>r&&(r="0"+r),[e,n,i,r].join(":")},getTime:function(){var t=P.a.uptime();return"您的开机时长："+this.dealTime(t)}};global.__static=n(2).join(__dirname,"/static").replace(/\\/g,"\\\\");var F=void 0,L=void 0,j=void 0,z="darwin"===process.platform,C="file://"+__dirname+"/index.html#setting",N="file://"+__dirname+"/index.html#desktop";l.ipcMain.on("bg_text_color",function(){null!=j&&j.webContents.send("bg_text_color","ping")}),l.app.makeSingleInstance(function(){j&&(j.isMinimized()&&j.restore(),j.focus())})&&l.app.quit(),l.app.on("ready",function(){u(),a(),z?(z&&l.app.dock.hide(),"2"===S.get("curr_model")&&(i(),setTimeout(function(){c(1)},1e3))):(i(),setTimeout(function(){c(1)},1e3))}),l.app.on("window-all-closed",function(){"darwin"!==process.platform&&l.app.quit()})}]);